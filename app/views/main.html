<div class="row" ng-if="isLoggedIn()">
  <button type="button" class="btn btn-lg btn-success" ng-click="createNewProject()">New project</button>
</div>

<div ng-include src="'views/register.html'" ng-if="!isLoggedIn()"></div>

<div>
  <h2>My projects (participant status)</h2>
  <table class="table table-striped table-hover" ng-if="isLoggedIn()">
    <thead>
      <th>#</th>
      <th>Title</th>
      <th>Start</th>
      <th>End</th>
      <th>Creator</th>
      <th>Owner</th>
      <th>Participants</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <tr ng-repeat="project in projects">
        <td>{{::$index+1}}</td>
        <td>{{::project.title}}</td>
        <td>{{::displayDate(project.start)}}</td>
        <td>{{::displayDate(project.end)}}</td>
        <td>{{::(project.creator.name.first + ' ' + project.creator.name.last)}}</td>
        <td>{{::(project.owner.name.first + ' ' + project.owner.name.last)}}</td>
        <td>{{::displayParticipants(project.participants)}}</td>
        <td>
          <div class="btn-group" uib-dropdown>
            <button id="btn-append-to-single-button" type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>
              <span class="glyphicon glyphicon-cog"></span>
            </button>
            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-single-button">
              <li role="menuitem"><a ng-click="doEdit(project)">Edit</a></li>
              <li role="menuitem" ng-class="{ disabled: !canLeaveProject(project) }"><a ng-click="doLeave(project)">Leave</a></li>
              <li class="divider"></li>
              <li role="menuitem" ng-class="{ disabled: !canDeleteProject(project) }"><a ng-click="doDelete(project)">Delete</a></li>
            </ul>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
